+++
author = "Soeun"
title = "λλ¤κ°’μ— μν• λΉ„μ¦λ‹μ¤ λ΅μ§ ν…μ¤νΈν•κΈ°"
date = "2023-11-04"
description = "μλ™μ°¨ κ²½μ£Ό λ¦¬ν©ν† λ§"
categories = [
    "CS"
]
tags = [
    "Clean Code"
]
image = ""
slug = "testing-random-values"
+++

## π‘π» λƒ„μƒλ‚λ” μ½”λ“

λ§μ•½, λλ¤ μ«μλ΅ μΈν•΄ λ΅μ§μ΄ μƒκΈ΄λ‹¤κ³  ν•μ. μλ¥Ό λ“¤μ–΄, λλ¤κ°’μ΄ 4 μ΄μƒμ΄λ©΄ μλ™μ°¨κ°€ 1 μ „μ§„ν•λ” κ·μΉ™μ΄ μλ‹¤κ³  ν•μ.

ν…μ¤νΈ ν•κΈ° λ‚μ π’©λƒ„μƒλ‚λ” μ½”λ“π’© μ μμ‹λ¥Ό λ³΄μ. 

```java
public class Car{
	private final CarName carName;  
	private final CarPosition carPosition;
	
	public Car(String name) {  
	    this.carName = new CarName(name);  
	    this.carPosition = new CarPosition();  
	}
	public void moveByCondition() {  
	    if (moveRule.shouldMove()) {  
	        carPosition.advancePosition();  
	    }  
	}
}
```

```java
public class MoveStrategy{
	public boolean shouldMove() {  
	    randomNumber = randomNumberGenerator.getRandomNumber();  
	    return randomNumber >= MOVE_CONDITION;  
	}
}
```

μ„λ” moveByCondition λ©”μ„λ“κ°€ shouldMove μ— μμ΅΄ν•κ³  μλ‹¤. shouldMove λ” random number μ— λ”°λΌμ„ true/false κ°’μ„ λ°ν™λκΈ° λ•λ¬Έμ— μ‰½κ² ν…μ¤νΈν•κΈ° νλ“¤λ‹¤. μ¦‰, ν…μ¤νΈν•κΈ° μ–΄λ ¤μ΄ λƒ„μƒλ‚λ” μ½”λ“μ΄λ‹¤. μ΄κ²ƒμ„ ν…μ¤νΈ κ°€λ¥ν• μ½”λ“λ΅ λ¦¬ν©ν† λ§ ν•΄λ³΄μ. 

## π‘ Strategy interface μƒμ„±

<span style="background:#fff88f">Strategy μΈν„°νμ΄μ¤λ¥Ό μƒμ„±</span>ν•κ³ , μ‹¤μ  ν”„λ΅λ•μ… μ½”λ“μ—λ” λλ¤κ°’μ— λ”°λΌ κ²°μ •λλ” RandomMoveStrategy, ν…μ¤νΈ μ½”λ“μ—λ” λ‚΄κ°€ κ³ μ •λ κ°’μΌλ΅ ν…μ¤νΈν•  μ μλ” FixedMovedStrategy λ¥Ό μ£Όμ…ν•λ” κ²ƒμ΄λ‹¤.  μΈν„°νμ΄μ¤λ¥Ό μ£Όμ…λ°›μΌλ©΄ μ‹¤μ  μ „λµκ³Ό μλ™μ°¨ μ‚¬μ΄μ κ²°ν•©λ„κ°€ λ–¨μ–΄μ§„λ‹¤. Strategy λ¥Ό κµ¬ν„ν•λ” μ‹¤μ  μ „λµλ“¤μ„ λ¬΄μ΅°κ±΄ shouldMove() λ©”μ„λ“λ¥Ό κµ¬ν„ν•΄μ•Ό ν•λ‹¤. 

```java
public interface Strategy {  
    int MOVE_CONDITION = 4;  
    boolean shouldMove();  
}
```

μ•„λλ” μ‹¤μ  ν”„λ΅λ•μ… μ½”λ“μ—μ„ μ‚¬μ©ν•λ” **RandomMoveStrategy** μ΄λ‹¤. λλ¤κ°’μ— λ”°λΌ shouldMove κ°€ True/False κ°€ λ°ν™λλ‹¤. 
```java
public class RandomMoveStrategy implements Strategy {  
    @Override  
    public boolean shouldMove() {  
        return RandomNumberGenerator.getRandomNumber() >= MOVE_CONDITION;  
    }  
}
```

μ•„λλ” ν…μ¤νΈ μ½”λ“μ—μ„ μ‚¬μ©ν•  **FixedMoveStrategy** μ΄λ‹¤. λ‚΄κ°€ μ£Όμ…ν•λ” κ°’μ— λ”°λΌ Treu/False κ°€ λ°ν™λλ‹¤. 
```java
public class FixedMoveStrategy implements Strategy {  
  
    private int num;  
    public FixedMoveStrategy(int num){  
        this.num = num;  
    }  
    @Override  
    public boolean shouldMove() {  
        return num >= MOVE_CONDITION;  
    }  
}
```

κ·ΈλΌ Car κ°μ²΄λ¥Ό λ‹¤μ‹ κµ¬ν„ν•΄λ³΄μ. μƒμ„±μμ— Strategy μΈν„°νμ΄μ¤ λ¥Ό λ°›κ³  μλ‹¤. Car μ μ…μ¥μ—μ„λ” μ΄κ² μ‹¤μ λ΅ RandomMoveStrategy μΈμ§€, FixedMoveStrategy μΈμ§€ μ•μ§€ λ»ν•λ‹¤. 

```java
public class Car {  
    private final CarName carName;  
    private final CarPosition carPosition;  
    private final Strategy strategy;  
  
    public Car(String name, Strategy strategy) {  
        this.carName = new CarName(name);  
        this.carPosition = new CarPosition();  
        this.strategy = strategy;  
    }  
  
    public void moveByCondition() {  
        if (strategy.shouldMove()){  
            carPosition.advancePosition();  
        }  
    }
}
```

μ΄μ  ν…μ¤νΈμ½”λ“λ¥Ό λ‹¤μ‹ μ‘μ„±ν•΄λ³΄μ. Car κ°μ²΄λ¥Ό μƒμ„±ν•  λ• ν…μ¤νΈ μ½”λ“ μ©λ„λ΅ λ§λ“¤μ—λ FixedMoveStrategy λ¥Ό μ£Όμ…ν•λ©΄ λλ‹¤. μ΄λ ‡κ² λλ©΄ μ£Όμ–΄μ§„ μ«μμ— λ”°λΌ moveByCondition() λ©”μ„λ“κ°€ μ μ‘λ™ν•λ”μ§€ ν…μ¤νΈ ν•  μ μλ‹¤ ! 

```java
@Test  
@DisplayName("4 λ―Έλ§μ μκ°€ μ£Όμ–΄μ§ λ• μλ™μ°¨ μ›€μ§μ„ ν…μ¤νΈ")  
void car_test_when_under_4(){  
    Car car = new Car("mycar",new FixedMoveStrategy(3));  
    car.moveByCondition();  
    Assertions.assertThat(car.getPosition()).isEqualTo(0);  
}  
  
@Test  
@DisplayName("4 μ΄μƒμ μκ°€ μ£Όμ–΄μ§ λ• μλ™μ°¨ μ›€μ§μ„ ν…μ¤νΈ")  
void car_test_when_over_4(){  
    Car car = new Car("mycar",new FixedMoveStrategy(4));  
    car.moveByCondition();  
    Assertions.assertThat(car.getPosition()).isEqualTo(1);  
}
```

μ΄κ²ƒμ€ λ””μμΈν¨ν„΄ μ¤‘ ν•λ‚μΈ <span style="background:#fff88f">**μ „λµν¨ν„΄**</span> μ„ ν™μ©ν• κ²ƒμ΄λ‹¤. Car κ°μ²΄κ°€ μΈν„°νμ΄μ¤μ— μμ΅΄ν•κ² λ§λ“¤μ–΄μ„, μ μ—°μ„±μ„ λ†’μΌ μ μμ—λ‹¤. 


## Reference
https://tecoble.techcourse.co.kr/post/2020-05-17-appropriate_method_for_test_by_interface/